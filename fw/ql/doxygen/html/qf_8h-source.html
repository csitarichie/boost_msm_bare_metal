<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>QP/C++: qf.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.4 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<h1>qf.h</h1><a href="qf_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="comment">// Product: QF/C++ platform-independent public interface</span>
<a name="l00003"></a>00003 <span class="comment">// Last Updated for Version: 4.0.00</span>
<a name="l00004"></a>00004 <span class="comment">// Date of the Last Update:  Apr 06, 2008</span>
<a name="l00005"></a>00005 <span class="comment">//</span>
<a name="l00006"></a>00006 <span class="comment">//                    Q u a n t u m     L e a P s</span>
<a name="l00007"></a>00007 <span class="comment">//                    ---------------------------</span>
<a name="l00008"></a>00008 <span class="comment">//                    innovating embedded systems</span>
<a name="l00009"></a>00009 <span class="comment">//</span>
<a name="l00010"></a>00010 <span class="comment">// Copyright (C) 2002-2008 Quantum Leaps, LLC. All rights reserved.</span>
<a name="l00011"></a>00011 <span class="comment">//</span>
<a name="l00012"></a>00012 <span class="comment">// This software may be distributed and modified under the terms of the GNU</span>
<a name="l00013"></a>00013 <span class="comment">// General Public License version 2 (GPL) as published by the Free Software</span>
<a name="l00014"></a>00014 <span class="comment">// Foundation and appearing in the file GPL.TXT included in the packaging of</span>
<a name="l00015"></a>00015 <span class="comment">// this file. Please note that GPL Section 2[b] requires that all works based</span>
<a name="l00016"></a>00016 <span class="comment">// on this software must also be made publicly available under the terms of</span>
<a name="l00017"></a>00017 <span class="comment">// the GPL ("Copyleft").</span>
<a name="l00018"></a>00018 <span class="comment">//</span>
<a name="l00019"></a>00019 <span class="comment">// Alternatively, this software may be distributed and modified under the</span>
<a name="l00020"></a>00020 <span class="comment">// terms of Quantum Leaps commercial licenses, which expressly supersede</span>
<a name="l00021"></a>00021 <span class="comment">// the GPL and are specifically designed for licensees interested in</span>
<a name="l00022"></a>00022 <span class="comment">// retaining the proprietary status of their code.</span>
<a name="l00023"></a>00023 <span class="comment">//</span>
<a name="l00024"></a>00024 <span class="comment">// Contact information:</span>
<a name="l00025"></a>00025 <span class="comment">// Quantum Leaps Web site:  http://www.quantum-leaps.com</span>
<a name="l00026"></a>00026 <span class="comment">// e-mail:                  info@quantum-leaps.com</span>
<a name="l00028"></a>00028 <span class="comment"></span><span class="preprocessor">#ifndef qf_h</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#define qf_h</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00037"></a>00037 
<a name="l00039"></a>00039 <span class="preprocessor">#if (QF_MAX_ACTIVE &lt; 1) || (63 &lt; QF_MAX_ACTIVE)</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span><span class="preprocessor">    #error "QF_MAX_ACTIVE not defined or out of range. Valid range is 1..63"</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>
<a name="l00044"></a>00044 <span class="preprocessor">#ifndef QF_EVENT_SIZ_SIZE</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00047"></a><a class="code" href="qf_8h.html#1272d49c23ca5852a7a8e9603ba32d31">00047</a> <span class="preprocessor">    #define QF_EVENT_SIZ_SIZE 2</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="preprocessor">#if (QF_EVENT_SIZ_SIZE == 1)</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>
<a name="l00056"></a>00056     <span class="keyword">typedef</span> <a class="code" href="qep__port_8h.html#ba7bc1797add20fe3efdf37ced1182c5" title="C99 exact-width 8-bit unsigned int.">uint8_t</a> QEventSize;
<a name="l00057"></a>00057 <span class="preprocessor">#elif (QF_EVENT_SIZ_SIZE == 2)</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>    <span class="keyword">typedef</span> <a class="code" href="qep__port_8h.html#273cf69d639a59973b6019625df33e30" title="C99 exact-width 16-bit unsigned int.">uint16_t</a> QEventSize;
<a name="l00059"></a>00059 <span class="preprocessor">#elif (QF_EVENT_SIZ_SIZE == 4)</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span>    <span class="keyword">typedef</span> <a class="code" href="qep__port_8h.html#06896e8c53f721507066c079052171f8" title="C99 exact-width 32-bit unsigned int.">uint32_t</a> QEventSize;
<a name="l00061"></a>00061 <span class="preprocessor">#else</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span><span class="preprocessor">    #error "QF_EVENT_SIZ_SIZE defined incorrectly, expected 1, 2, or 4"</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span>
<a name="l00065"></a>00065 
<a name="l00067"></a>00067 <span class="preprocessor">#ifndef QF_ACTIVE_SUPER_</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span>
<a name="l00084"></a>00084 <span class="preprocessor">    #define QF_ACTIVE_SUPER_  QHsm</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span>
<a name="l00087"></a>00087 <span class="preprocessor">    #define QF_ACTIVE_STATE_  QStateHandler</span>
<a name="l00088"></a>00088 <span class="preprocessor"></span>
<a name="l00089"></a>00089 <span class="preprocessor">#endif</span>
<a name="l00090"></a>00090 <span class="preprocessor"></span>
<a name="l00091"></a>00091 <span class="keyword">class </span><a class="code" href="class_q_e_queue.html" title="Native QF Event Queue class.">QEQueue</a>;                                          <span class="comment">// forward declaration</span>
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 
<a name="l00113"></a>00113 <span class="keyword">class </span><a class="code" href="class_q_active.html" title="Base class for derivation of application-level active object classes.">QActive</a> : <span class="keyword">public</span> <a class="code" href="qf_8h.html#693fe2fdd4b701be0836f7cad7ee7e45" title="The macro defining the base class for QActive.">QF_ACTIVE_SUPER_</a> {
<a name="l00114"></a>00114 <span class="keyword">private</span>:
<a name="l00115"></a>00115 
<a name="l00125"></a>00125     <a class="code" href="qk_8h.html#ee19c1d6e860d59dda6e539852b99dbe" title="This macro defines the type of the event queue used for the active objects.">QF_EQUEUE_TYPE</a> m_eQueue;
<a name="l00126"></a>00126 
<a name="l00127"></a>00127 <span class="keyword">public</span>:
<a name="l00128"></a>00128 <span class="preprocessor">#ifdef QF_OS_OBJECT_TYPE</span>
<a name="l00135"></a>00135 <span class="preprocessor">    QF_OS_OBJECT_TYPE m_osObject;</span>
<a name="l00136"></a>00136 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00137"></a>00137 <span class="preprocessor"></span>
<a name="l00138"></a>00138 <span class="preprocessor">#ifdef QF_THREAD_TYPE</span>
<a name="l00145"></a>00145 <span class="preprocessor">    QF_THREAD_TYPE m_thread;</span>
<a name="l00146"></a>00146 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00147"></a>00147 <span class="preprocessor"></span>
<a name="l00150"></a>00150     <a class="code" href="qep__port_8h.html#ba7bc1797add20fe3efdf37ced1182c5" title="C99 exact-width 8-bit unsigned int.">uint8_t</a> <a class="code" href="class_q_active.html#70d9ff3bd1838921d2d25223900e0ca8" title="QF priority associated with the active object.">m_prio</a>;
<a name="l00151"></a>00151 
<a name="l00160"></a>00160     <a class="code" href="qep__port_8h.html#ba7bc1797add20fe3efdf37ced1182c5" title="C99 exact-width 8-bit unsigned int.">uint8_t</a> <a class="code" href="class_q_active.html#39ad6e0e372e7e1734867e8e6b22ddcc" title="The Boolean loop variable determining if the thread routine of the active object...">m_running</a>;
<a name="l00161"></a>00161 
<a name="l00162"></a>00162 <span class="keyword">public</span>:
<a name="l00163"></a>00163 
<a name="l00190"></a>00190     <span class="keywordtype">void</span> <a class="code" href="class_q_active.html#edb01d8ba6b6de77c8b72df057abe336" title="Starts execution of an active object and registers the object with the framework...">start</a>(<a class="code" href="qep__port_8h.html#ba7bc1797add20fe3efdf37ced1182c5" title="C99 exact-width 8-bit unsigned int.">uint8_t</a> prio,
<a name="l00191"></a>00191                <a class="code" href="struct_q_event.html" title="QEvent base class.">QEvent</a> <span class="keyword">const</span> *qSto[], <a class="code" href="qep__port_8h.html#06896e8c53f721507066c079052171f8" title="C99 exact-width 32-bit unsigned int.">uint32_t</a> qLen,
<a name="l00192"></a>00192                <span class="keywordtype">void</span> *stkSto, <a class="code" href="qep__port_8h.html#06896e8c53f721507066c079052171f8" title="C99 exact-width 32-bit unsigned int.">uint32_t</a> stkSize,
<a name="l00193"></a>00193                <a class="code" href="struct_q_event.html" title="QEvent base class.">QEvent</a> <span class="keyword">const</span> *ie = (<a class="code" href="struct_q_event.html" title="QEvent base class.">QEvent</a> *)0);
<a name="l00194"></a>00194 
<a name="l00213"></a>00213     <span class="keywordtype">void</span> <a class="code" href="class_q_active.html#46f02154787a4f0f0ac91638251da82a" title="Posts an event e directly to the event queue of the acitve object me using the First-In-First-Out...">postFIFO</a>(<a class="code" href="struct_q_event.html" title="QEvent base class.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l00214"></a>00214 
<a name="l00221"></a>00221     <span class="keywordtype">void</span> <a class="code" href="class_q_active.html#6c2deb168c17567ab6bbc2178d67878d" title="Posts an event directly to the event queue of the active object me using the Last-In-First-Out...">postLIFO</a>(<a class="code" href="struct_q_event.html" title="QEvent base class.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l00222"></a>00222 
<a name="l00233"></a>00233     <span class="keywordtype">void</span> <a class="code" href="class_q_active.html#0cea14cd2b9f2f2b5a8185625eed99d0" title="Traditional loop-structured thread routine for an active object.">run</a>(<span class="keywordtype">void</span>);
<a name="l00234"></a>00234 
<a name="l00248"></a>00248     <a class="code" href="struct_q_event.html" title="QEvent base class.">QEvent</a> <span class="keyword">const</span> *<a class="code" href="class_q_active.html#29d494a0802145fdaf510ccc89c61dce" title="Get an event from the event queue of an active object.">get_</a>(<span class="keywordtype">void</span>);
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 <span class="keyword">protected</span>:
<a name="l00251"></a>00251 
<a name="l00261"></a>00261     <a class="code" href="class_q_active.html#d6830d1617b22f521d06e3e6c184519e" title="protected constructor">QActive</a>(<a class="code" href="qf_8h.html#63b8eade38e9ed1bd9e34cf10ceb718b" title="The argument of the base class&amp;#39; constructor.">QF_ACTIVE_STATE_</a> initial) : <a class="code" href="qf_8h.html#693fe2fdd4b701be0836f7cad7ee7e45" title="The macro defining the base class for QActive.">QF_ACTIVE_SUPER_</a>(initial) {
<a name="l00262"></a>00262     }
<a name="l00263"></a>00263 
<a name="l00277"></a>00277     <span class="keywordtype">void</span> <a class="code" href="class_q_active.html#d2001894b640ac76f5779f6beb87b694" title="Stops execution of an active object and removes it from the framework&amp;#39;s supervision...">stop</a>(<span class="keywordtype">void</span>);
<a name="l00278"></a>00278 
<a name="l00292"></a>00292     <span class="keywordtype">void</span> <a class="code" href="class_q_active.html#a2145cfedf8c4616dacdbf0b7609d8f2" title="Subscribes for delivery of signal sig to the active object.">subscribe</a>(<a class="code" href="qevent_8h.html#5dae830cf35fbe668a3fa2b47452a36b" title="QSignal represents the signal of an event.">QSignal</a> sig) <span class="keyword">const</span>;
<a name="l00293"></a>00293 
<a name="l00312"></a>00312     <span class="keywordtype">void</span> <a class="code" href="class_q_active.html#59a49779309642aa9d44ca43b47e5944" title="Un-subscribes from the delivery of signal sig to the active object.">unsubscribe</a>(<a class="code" href="qevent_8h.html#5dae830cf35fbe668a3fa2b47452a36b" title="QSignal represents the signal of an event.">QSignal</a> sig) <span class="keyword">const</span>;
<a name="l00313"></a>00313 
<a name="l00327"></a>00327     <span class="keywordtype">void</span> <a class="code" href="class_q_active.html#2b60c62e712768b6fadfa1fd75f910e5" title="Defer an event to a given separate event queue.">defer</a>(<a class="code" href="class_q_e_queue.html" title="Native QF Event Queue class.">QEQueue</a> *eq, <a class="code" href="struct_q_event.html" title="QEvent base class.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l00328"></a>00328 
<a name="l00344"></a>00344     <a class="code" href="struct_q_event.html" title="QEvent base class.">QEvent</a> <span class="keyword">const</span> *<a class="code" href="class_q_active.html#0ec00766be634a8e71a380a115ecfbaa" title="Recall a deferred event from a given event queue.">recall</a>(<a class="code" href="class_q_e_queue.html" title="Native QF Event Queue class.">QEQueue</a> *eq);
<a name="l00345"></a>00345 
<a name="l00346"></a>00346 <span class="keyword">public</span>:
<a name="l00365"></a>00365     <span class="keywordtype">void</span> <a class="code" href="class_q_active.html#36aa82f457ec53ab04b3f6b69a67f72c" title="Un-subscribes from the delivery of all signals to the active object.">unsubscribeAll</a>(<span class="keywordtype">void</span>) <span class="keyword">const</span>;
<a name="l00366"></a>00366 
<a name="l00367"></a>00367 <span class="keyword">private</span>:
<a name="l00368"></a>00368 
<a name="l00369"></a>00369     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_q_f.html" title="QF services.">QF</a>;
<a name="l00370"></a>00370     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_q_time_evt.html" title="Time Event class.">QTimeEvt</a>;
<a name="l00371"></a>00371 <span class="preprocessor">    #ifndef QF_INT_KEY_TYPE</span>
<a name="l00372"></a>00372 <span class="preprocessor"></span>        <span class="keyword">friend</span> <span class="keywordtype">void</span> QK_schedule_(<span class="keywordtype">void</span>);
<a name="l00373"></a>00373         <span class="keyword">friend</span> <span class="keywordtype">void</span> QK_scheduleExt_(<span class="keywordtype">void</span>);
<a name="l00374"></a>00374 <span class="preprocessor">    #else</span>
<a name="l00375"></a>00375 <span class="preprocessor"></span>        <span class="keyword">friend</span> <span class="keywordtype">void</span> QK_schedule_(<a class="code" href="qf__port_8h.html#243406ad5c97d8a56625f0cd3bb41c67" title="Define the type of the interrupt lock key.">QF_INT_KEY_TYPE</a> intLockKey);
<a name="l00376"></a>00376         <span class="keyword">friend</span> <span class="keywordtype">void</span> QK_scheduleExt_(<a class="code" href="qf__port_8h.html#243406ad5c97d8a56625f0cd3bb41c67" title="Define the type of the interrupt lock key.">QF_INT_KEY_TYPE</a> intLockKey);
<a name="l00377"></a>00377 <span class="preprocessor">    #endif</span>
<a name="l00378"></a>00378 <span class="preprocessor"></span>};
<a name="l00379"></a>00379 
<a name="l00380"></a>00380 
<a name="l00382"></a>00382 <span class="preprocessor">#ifndef QF_TIMEEVT_CTR_SIZE</span>
<a name="l00385"></a>00385 <span class="preprocessor">    #define QF_TIMEEVT_CTR_SIZE 2</span>
<a name="l00386"></a>00386 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00387"></a>00387 <span class="preprocessor"></span><span class="preprocessor">#if (QF_TIMEEVT_CTR_SIZE == 1)</span>
<a name="l00388"></a>00388 <span class="preprocessor"></span>
<a name="l00397"></a>00397     <span class="keyword">typedef</span> <a class="code" href="qep__port_8h.html#ba7bc1797add20fe3efdf37ced1182c5" title="C99 exact-width 8-bit unsigned int.">uint8_t</a> QTimeEvtCtr;
<a name="l00398"></a>00398 <span class="preprocessor">#elif (QF_TIMEEVT_CTR_SIZE == 2)</span>
<a name="l00399"></a>00399 <span class="preprocessor"></span>    <span class="keyword">typedef</span> <a class="code" href="qep__port_8h.html#273cf69d639a59973b6019625df33e30" title="C99 exact-width 16-bit unsigned int.">uint16_t</a> QTimeEvtCtr;
<a name="l00400"></a>00400 <span class="preprocessor">#elif (QF_TIMEEVT_CTR_SIZE == 4)</span>
<a name="l00401"></a>00401 <span class="preprocessor"></span>    <span class="keyword">typedef</span> <a class="code" href="qep__port_8h.html#06896e8c53f721507066c079052171f8" title="C99 exact-width 32-bit unsigned int.">uint32_t</a> QTimeEvtCtr;
<a name="l00402"></a>00402 <span class="preprocessor">#else</span>
<a name="l00403"></a>00403 <span class="preprocessor"></span><span class="preprocessor">    #error "QF_TIMEEVT_CTR_SIZE defined incorrectly, expected 1, 2, or 4"</span>
<a name="l00404"></a>00404 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00405"></a>00405 <span class="preprocessor"></span>
<a name="l00437"></a>00437 <span class="keyword">class </span><a class="code" href="class_q_time_evt.html" title="Time Event class.">QTimeEvt</a> : <span class="keyword">public</span> <a class="code" href="struct_q_event.html" title="QEvent base class.">QEvent</a> {
<a name="l00438"></a>00438 <span class="keyword">private</span>:
<a name="l00439"></a>00439 
<a name="l00441"></a>00441     <a class="code" href="class_q_time_evt.html" title="Time Event class.">QTimeEvt</a> *m_prev;
<a name="l00442"></a>00442 
<a name="l00444"></a>00444     <a class="code" href="class_q_time_evt.html" title="Time Event class.">QTimeEvt</a> *m_next;
<a name="l00445"></a>00445 
<a name="l00447"></a>00447     <a class="code" href="class_q_active.html" title="Base class for derivation of application-level active object classes.">QActive</a> *m_act;
<a name="l00448"></a>00448 
<a name="l00452"></a>00452     QTimeEvtCtr m_ctr;
<a name="l00453"></a>00453 
<a name="l00458"></a>00458     QTimeEvtCtr m_interval;
<a name="l00459"></a>00459 
<a name="l00460"></a>00460 <span class="keyword">public</span>:
<a name="l00461"></a>00461 
<a name="l00474"></a>00474     <a class="code" href="class_q_time_evt.html#a7e0360be0d4811d6b92a0611c067bf2" title="The Time Event constructor.">QTimeEvt</a>(<a class="code" href="qevent_8h.html#5dae830cf35fbe668a3fa2b47452a36b" title="QSignal represents the signal of an event.">QSignal</a> s);
<a name="l00475"></a>00475 
<a name="l00493"></a>00493     <span class="keywordtype">void</span> <a class="code" href="class_q_time_evt.html#9f62a3c24d569efd2199f5aa24bdb90a" title="Arm a one-shot time event for direct event posting.">postIn</a>(<a class="code" href="class_q_active.html" title="Base class for derivation of application-level active object classes.">QActive</a> *act, QTimeEvtCtr nTicks) {
<a name="l00494"></a>00494         m_interval = (<a class="code" href="qep__port_8h.html#273cf69d639a59973b6019625df33e30" title="C99 exact-width 16-bit unsigned int.">uint16_t</a>)0;
<a name="l00495"></a>00495         arm_(act, nTicks);
<a name="l00496"></a>00496     }
<a name="l00497"></a>00497 
<a name="l00518"></a>00518     <span class="keywordtype">void</span> <a class="code" href="class_q_time_evt.html#b07a0ee4cc4c3dfda2c7bb4a66e0731b" title="Arm a periodic time event for direct event posting.">postEvery</a>(<a class="code" href="class_q_active.html" title="Base class for derivation of application-level active object classes.">QActive</a> *act, QTimeEvtCtr nTicks) {
<a name="l00519"></a>00519         m_interval = nTicks;
<a name="l00520"></a>00520         arm_(act, nTicks);
<a name="l00521"></a>00521     }
<a name="l00522"></a>00522 
<a name="l00533"></a>00533     <a class="code" href="qep__port_8h.html#ba7bc1797add20fe3efdf37ced1182c5" title="C99 exact-width 8-bit unsigned int.">uint8_t</a> <a class="code" href="class_q_time_evt.html#233ebc920e7573025c891ccec6327682" title="Disarm a time event.">disarm</a>(<span class="keywordtype">void</span>);
<a name="l00534"></a>00534 
<a name="l00551"></a>00551     <a class="code" href="qep__port_8h.html#ba7bc1797add20fe3efdf37ced1182c5" title="C99 exact-width 8-bit unsigned int.">uint8_t</a> <a class="code" href="class_q_time_evt.html#05eb04876e7f620b2a2bcc130b8af19a" title="Rearm a time event.">rearm</a>(QTimeEvtCtr nTicks);
<a name="l00552"></a>00552 
<a name="l00553"></a>00553     <span class="comment">// for backwards compatibility</span>
<a name="l00554"></a>00554 
<a name="l00558"></a>00558     <span class="keywordtype">void</span> <a class="code" href="class_q_time_evt.html#30199dab24fe143688c04ebd9d0dcdb8" title="Arm a one-shot time event for direct event posting (obsolete).">fireIn</a>(<a class="code" href="class_q_active.html" title="Base class for derivation of application-level active object classes.">QActive</a> *act, QTimeEvtCtr nTicks) {
<a name="l00559"></a>00559         <a class="code" href="class_q_time_evt.html#9f62a3c24d569efd2199f5aa24bdb90a" title="Arm a one-shot time event for direct event posting.">postIn</a>(act, nTicks);
<a name="l00560"></a>00560     }
<a name="l00561"></a>00561 
<a name="l00565"></a>00565     <span class="keywordtype">void</span> <a class="code" href="class_q_time_evt.html#3fb40610266fee8ced36293438bcf7b7" title="Arm a periodic time event for direct event posting (obsolete).">fireEvery</a>(<a class="code" href="class_q_active.html" title="Base class for derivation of application-level active object classes.">QActive</a> *act, QTimeEvtCtr nTicks) {
<a name="l00566"></a>00566         <a class="code" href="class_q_time_evt.html#b07a0ee4cc4c3dfda2c7bb4a66e0731b" title="Arm a periodic time event for direct event posting.">postEvery</a>(act, nTicks);
<a name="l00567"></a>00567     }
<a name="l00568"></a>00568 
<a name="l00569"></a>00569 <span class="keyword">private</span>:
<a name="l00570"></a>00570 
<a name="l00576"></a>00576     <span class="keywordtype">void</span> arm_(<a class="code" href="class_q_active.html" title="Base class for derivation of application-level active object classes.">QActive</a> *act, QTimeEvtCtr nTicks);
<a name="l00577"></a>00577 
<a name="l00578"></a>00578     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_q_f.html" title="QF services.">QF</a>;
<a name="l00579"></a>00579 };
<a name="l00580"></a>00580 
<a name="l00581"></a>00581 
<a name="l00582"></a>00582 <span class="preprocessor">#if (QF_MAX_ACTIVE &gt; 63)</span>
<a name="l00583"></a>00583 <span class="preprocessor"></span><span class="preprocessor">    #error "QF_MAX_ACTIVE exceeds 63"</span>
<a name="l00584"></a>00584 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00585"></a>00585 <span class="preprocessor"></span>
<a name="l00592"></a>00592 <span class="keyword">class </span><a class="code" href="class_q_subscr_list.html" title="Subscriber List class.">QSubscrList</a> {
<a name="l00593"></a>00593 <span class="keyword">private</span>:
<a name="l00594"></a>00594 
<a name="l00603"></a>00603     <a class="code" href="qep__port_8h.html#ba7bc1797add20fe3efdf37ced1182c5" title="C99 exact-width 8-bit unsigned int.">uint8_t</a> m_bits[((<a class="code" href="qf__port_8h.html#776d2a032974db4bf9bcfde01ace1389" title="The maximum number of active objects in the application.">QF_MAX_ACTIVE</a> - 1) / 8) + 1];
<a name="l00604"></a>00604 
<a name="l00605"></a>00605     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_q_f.html" title="QF services.">QF</a>;
<a name="l00606"></a>00606     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_q_active.html" title="Base class for derivation of application-level active object classes.">QActive</a>;
<a name="l00607"></a>00607 };
<a name="l00608"></a>00608 
<a name="l00614"></a>00614 <span class="keyword">class </span><a class="code" href="class_q_f.html" title="QF services.">QF</a> {
<a name="l00615"></a>00615 <span class="keyword">public</span>:
<a name="l00616"></a>00616 
<a name="l00621"></a>00621     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_q_f.html#6ad3fc234e46c8a32ea9458533db229b" title="QF initialization.">init</a>(<span class="keywordtype">void</span>);
<a name="l00622"></a>00622 
<a name="l00648"></a>00648     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_q_f.html#3ce01adc2cf6db212a036306ee03bd33" title="Publish-subscribe initialization.">psInit</a>(<a class="code" href="class_q_subscr_list.html" title="Subscriber List class.">QSubscrList</a> *subscrSto, <a class="code" href="qevent_8h.html#5dae830cf35fbe668a3fa2b47452a36b" title="QSignal represents the signal of an event.">QSignal</a> maxSignal);
<a name="l00649"></a>00649 
<a name="l00682"></a>00682     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_q_f.html#5defbf03f35eb4bcef9eee150e42821d" title="Event pool initialization for dynamic allocation of events.">poolInit</a>(<span class="keywordtype">void</span> *poolSto, <a class="code" href="qep__port_8h.html#06896e8c53f721507066c079052171f8" title="C99 exact-width 32-bit unsigned int.">uint32_t</a> poolSize,
<a name="l00683"></a>00683                          QEventSize evtSize);
<a name="l00684"></a>00684 
<a name="l00706"></a>00706     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_q_f.html#09b2df3e8eb5f22cd401cd637c40f369" title="Transfers control to QF to run the application.">run</a>(<span class="keywordtype">void</span>);
<a name="l00707"></a>00707 
<a name="l00713"></a>00713     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_q_f.html#27e969500c797c2939cf8bec05273be2" title="Startup QF callback.">onStartup</a>(<span class="keywordtype">void</span>);
<a name="l00714"></a>00714 
<a name="l00727"></a>00727     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_q_f.html#9569a5e1a10e536650109855cd89af47" title="Cleanup QF callback.">onCleanup</a>(<span class="keywordtype">void</span>);
<a name="l00728"></a>00728 
<a name="l00729"></a>00729 <span class="preprocessor">#ifndef QF_INT_KEY_TYPE</span>
<a name="l00730"></a>00730 <span class="preprocessor"></span>    <span class="keyword">static</span> <span class="keywordtype">void</span> onIdle(<span class="keywordtype">void</span>);                <span class="comment">// interrupt lock key NOT defined</span>
<a name="l00731"></a>00731 
<a name="l00732"></a>00732 <span class="preprocessor">#else</span>
<a name="l00733"></a>00733 <span class="preprocessor"></span>
<a name="l00757"></a>00757     <span class="keyword">static</span> <span class="keywordtype">void</span> onIdle(<a class="code" href="qf__port_8h.html#243406ad5c97d8a56625f0cd3bb41c67" title="Define the type of the interrupt lock key.">QF_INT_KEY_TYPE</a> intLockKey);   <span class="comment">// int. lock key defined</span>
<a name="l00758"></a>00758 
<a name="l00759"></a>00759 <span class="preprocessor">#endif                                                      // QF_INT_KEY_TYPE</span>
<a name="l00760"></a>00760 <span class="preprocessor"></span>
<a name="l00778"></a>00778     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_q_f.html#1a8e5a6ad959cd7cf52eed88cbdad20c" title="Function invoked by the application layer to stop the QF application and return control...">stop</a>(<span class="keywordtype">void</span>);
<a name="l00779"></a>00779 
<a name="l00791"></a>00791     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_q_f.html#35ad8ba7e1f1bce525b80d5156465317" title="Publish event to the framework.">publish</a>(<a class="code" href="struct_q_event.html" title="QEvent base class.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l00792"></a>00792 
<a name="l00807"></a>00807     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_q_f.html#1e53786c3f398cf9c37d5a02ead5a79b" title="Processes all armed time events at every clock tick.">tick</a>(<span class="keywordtype">void</span>);
<a name="l00808"></a>00808 
<a name="l00818"></a>00818     <span class="keyword">static</span> <span class="keywordtype">char</span> <span class="keyword">const</span> Q_ROM * Q_ROM_VAR <a class="code" href="class_q_f.html#ea5335373a13d20f56099a0cfdfa723e" title="Returns the QF version.">getVersion</a>(<span class="keywordtype">void</span>);
<a name="l00819"></a>00819 
<a name="l00828"></a>00828     <span class="keyword">static</span> <span class="keywordtype">char</span> <span class="keyword">const</span> Q_ROM * Q_ROM_VAR <a class="code" href="class_q_f.html#8753eb3f87b739ddf49fd73357a762d1" title="Returns the QF-port version.">getPortVersion</a>(<span class="keywordtype">void</span>);
<a name="l00829"></a>00829 
<a name="l00842"></a>00842     <span class="keyword">static</span> <a class="code" href="qep__port_8h.html#06896e8c53f721507066c079052171f8" title="C99 exact-width 32-bit unsigned int.">uint32_t</a> <a class="code" href="class_q_f.html#7b72df3c92fc6ead554963443762ca22" title="This function returns the margin of the given event pool.">getPoolMargin</a>(<a class="code" href="qep__port_8h.html#ba7bc1797add20fe3efdf37ced1182c5" title="C99 exact-width 8-bit unsigned int.">uint8_t</a> poolId);
<a name="l00843"></a>00843 
<a name="l00855"></a>00855     <span class="keyword">static</span> <a class="code" href="qep__port_8h.html#06896e8c53f721507066c079052171f8" title="C99 exact-width 32-bit unsigned int.">uint32_t</a> <a class="code" href="class_q_f.html#f6cc651557aaa4040db1995982b1244f" title="This function returns the margin of the given event queue.">getQueueMargin</a>(<a class="code" href="qep__port_8h.html#ba7bc1797add20fe3efdf37ced1182c5" title="C99 exact-width 8-bit unsigned int.">uint8_t</a> prio);
<a name="l00856"></a>00856 
<a name="l00861"></a>00861     <span class="keyword">static</span> <a class="code" href="struct_q_event.html" title="QEvent base class.">QEvent</a> *<a class="code" href="class_q_f.html#0372670610b5d72a5e985503e2ba0b6b" title="Internal QF implementation of the dynamic event allocator.">new_</a>(<a class="code" href="qep__port_8h.html#273cf69d639a59973b6019625df33e30" title="C99 exact-width 16-bit unsigned int.">uint16_t</a> evtSize, <a class="code" href="qevent_8h.html#5dae830cf35fbe668a3fa2b47452a36b" title="QSignal represents the signal of an event.">QSignal</a> sig);
<a name="l00862"></a>00862 
<a name="l00876"></a>00876 <span class="preprocessor">    #define Q_NEW(evtT_, sig_) ((evtT_ *)QF::new_(sizeof(evtT_), (sig_)))</span>
<a name="l00877"></a>00877 <span class="preprocessor"></span>
<a name="l00899"></a>00899     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_q_f.html#10497af0567c730737b33e46cf2ffd6c" title="Recycle a dynamic event.">gc</a>(<a class="code" href="struct_q_event.html" title="QEvent base class.">QEvent</a> <span class="keyword">const</span> *e);
<a name="l00900"></a><a class="code" href="class_q_f.html#82e692a5232ab9f5226168f345a2af11">00900</a> 
<a name="l00904"></a>00904     <span class="keyword">static</span> <a class="code" href="class_q_active.html" title="Base class for derivation of application-level active object classes.">QActive</a> *<a class="code" href="class_q_f.html#82e692a5232ab9f5226168f345a2af11" title="array of registered active objects">active_</a>[];
<a name="l00905"></a>00905 
<a name="l00906"></a>00906 <span class="keyword">private</span>:                              <span class="comment">// functions to be used in QF ports only</span>
<a name="l00907"></a>00907 
<a name="l00918"></a>00918     <span class="keyword">static</span> <span class="keywordtype">void</span> add_(<a class="code" href="class_q_active.html" title="Base class for derivation of application-level active object classes.">QActive</a> *a);
<a name="l00919"></a>00919 
<a name="l00920"></a>00920 <span class="keyword">public</span>:
<a name="l00932"></a>00932     <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_q_f.html#0032e774fcf6293d2136e960fcc48528" title="Remove the active object from the framework.">remove_</a>(<a class="code" href="class_q_active.html" title="Base class for derivation of application-level active object classes.">QActive</a> <span class="keyword">const</span> *a);
<a name="l00933"></a>00933 
<a name="l00934"></a>00934     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="class_q_active.html" title="Base class for derivation of application-level active object classes.">QActive</a>;
<a name="l00935"></a>00935 };
<a name="l00936"></a>00936 
<a name="l00938"></a>00938 <span class="comment">// useful lookup tables</span>
<a name="l00939"></a>00939 
<a name="l00949"></a>00949 <span class="keyword">extern</span> <a class="code" href="qep__port_8h.html#ba7bc1797add20fe3efdf37ced1182c5" title="C99 exact-width 8-bit unsigned int.">uint8_t</a> <span class="keyword">const</span> Q_ROM Q_ROM_VAR <a class="code" href="qf_8h.html#b47e1f0b5f8a97bc75f7ff7d62c5e18f" title="Lookup table for (log2(n) + 1), where n is the index into the table.">QF_log2Lkup</a>[256];
<a name="l00950"></a>00950 
<a name="l00956"></a>00956 <span class="keyword">extern</span> <a class="code" href="qep__port_8h.html#ba7bc1797add20fe3efdf37ced1182c5" title="C99 exact-width 8-bit unsigned int.">uint8_t</a> <span class="keyword">const</span> Q_ROM Q_ROM_VAR <a class="code" href="qf_8h.html#2091dd1ed771cbef5ca70e1542829cc4" title="Lookup table for (1 &amp;lt;&amp;lt; ((n-1) % 8)), where n is the index into the table.">QF_pwr2Lkup</a>[65];
<a name="l00957"></a>00957 
<a name="l00963"></a>00963 <span class="keyword">extern</span> <a class="code" href="qep__port_8h.html#ba7bc1797add20fe3efdf37ced1182c5" title="C99 exact-width 8-bit unsigned int.">uint8_t</a> <span class="keyword">const</span> Q_ROM Q_ROM_VAR <a class="code" href="qf_8h.html#01186f1b8051d6e98c86f76bd9d95f32" title="Lookup table for ~(1 &amp;lt;&amp;lt; ((n-1) % 8)), where n is the index into the table.">QF_invPwr2Lkup</a>[65];
<a name="l00964"></a>00964 
<a name="l00969"></a>00969 <span class="keyword">extern</span> <a class="code" href="qep__port_8h.html#ba7bc1797add20fe3efdf37ced1182c5" title="C99 exact-width 8-bit unsigned int.">uint8_t</a> <span class="keyword">const</span> Q_ROM Q_ROM_VAR <a class="code" href="qf_8h.html#765803e2ff8d3550b3334efe9c366709" title="Lookup table for (n-1)/8.">QF_div8Lkup</a>[65];
<a name="l00970"></a>00970 
<a name="l00971"></a>00971 
<a name="l00973"></a>00973 <span class="comment">// QS software tracing integration, only if enabled</span>
<a name="l00974"></a>00974 <span class="preprocessor">#ifdef Q_SPY                                   // QS software tracing enabled?</span>
<a name="l00975"></a>00975 <span class="preprocessor"></span><span class="preprocessor">    #ifndef qs_h</span>
<a name="l00976"></a>00976 <span class="preprocessor"></span><span class="preprocessor">    #include "<a class="code" href="qs__port_8h.html" title="QS/C++ port for a &amp;quot;generic&amp;quot; C++ compiler.">qs_port.h</a>"</span>                                    <span class="comment">// include QS port</span>
<a name="l00977"></a>00977 <span class="preprocessor">    #endif                                                             // qs_h</span>
<a name="l00978"></a>00978 <span class="preprocessor"></span>
<a name="l00979"></a>00979 <span class="preprocessor">    #if (QF_EQUEUE_CTR_SIZE == 1)</span>
<a name="l00980"></a>00980 <span class="preprocessor"></span>
<a name="l00984"></a><a class="code" href="qf_8h.html#0faa34a5532e34a03b4f8636dfc0741a">00984</a> <span class="preprocessor">        #define QS_EQC_(ctr_)       QS::u8_(ctr_)</span>
<a name="l00985"></a>00985 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_EQUEUE_CTR_SIZE == 2)</span>
<a name="l00986"></a>00986 <span class="preprocessor"></span><span class="preprocessor">        #define QS_EQC_(ctr_)       QS::u16_(ctr_)</span>
<a name="l00987"></a>00987 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_EQUEUE_CTR_SIZE == 4)</span>
<a name="l00988"></a>00988 <span class="preprocessor"></span><span class="preprocessor">        #define QS_EQC_(ctr_)       QS::u32_(ctr_)</span>
<a name="l00989"></a>00989 <span class="preprocessor"></span><span class="preprocessor">    #else</span>
<a name="l00990"></a>00990 <span class="preprocessor"></span><span class="preprocessor">        #error "QF_EQUEUE_CTR_SIZE not defined"</span>
<a name="l00991"></a>00991 <span class="preprocessor"></span><span class="preprocessor">    #endif</span>
<a name="l00992"></a>00992 <span class="preprocessor"></span>
<a name="l00993"></a>00993 
<a name="l00994"></a>00994 <span class="preprocessor">    #if (QF_EVENT_SIZ_SIZE == 1)</span>
<a name="l00995"></a>00995 <span class="preprocessor"></span>
<a name="l00999"></a>00999 <span class="preprocessor">        #define QS_EVS_(size_)      QS::u8_(size_)</span>
<a name="l01000"></a>01000 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_EVENT_SIZ_SIZE == 2)</span>
<a name="l01001"></a>01001 <span class="preprocessor"></span><span class="preprocessor">        #define QS_EVS_(size_)      QS::u16_(size_)</span>
<a name="l01002"></a>01002 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_EVENT_SIZ_SIZE == 4)</span>
<a name="l01003"></a>01003 <span class="preprocessor"></span><span class="preprocessor">        #define QS_EVS_(size_)      QS::u32_(size_)</span>
<a name="l01004"></a>01004 <span class="preprocessor"></span><span class="preprocessor">    #endif</span>
<a name="l01005"></a>01005 <span class="preprocessor"></span>
<a name="l01006"></a>01006 
<a name="l01007"></a>01007 <span class="preprocessor">    #if (QF_MPOOL_SIZ_SIZE == 1)</span>
<a name="l01008"></a>01008 <span class="preprocessor"></span>
<a name="l01012"></a>01012 <span class="preprocessor">        #define QS_MPS_(size_)      QS::u8_(size_)</span>
<a name="l01013"></a>01013 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_MPOOL_SIZ_SIZE == 2)</span>
<a name="l01014"></a>01014 <span class="preprocessor"></span><span class="preprocessor">        #define QS_MPS_(size_)      QS::u16_(size_)</span>
<a name="l01015"></a>01015 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_MPOOL_SIZ_SIZE == 4)</span>
<a name="l01016"></a>01016 <span class="preprocessor"></span><span class="preprocessor">        #define QS_MPS_(size_)      QS::u32_(size_)</span>
<a name="l01017"></a>01017 <span class="preprocessor"></span><span class="preprocessor">    #endif</span>
<a name="l01018"></a>01018 <span class="preprocessor"></span>
<a name="l01019"></a>01019 <span class="preprocessor">    #if (QF_MPOOL_CTR_SIZE == 1)</span>
<a name="l01020"></a>01020 <span class="preprocessor"></span>
<a name="l01024"></a>01024 <span class="preprocessor">        #define QS_MPC_(ctr_)       QS::u8_(ctr_)</span>
<a name="l01025"></a>01025 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_MPOOL_CTR_SIZE == 2)</span>
<a name="l01026"></a>01026 <span class="preprocessor"></span><span class="preprocessor">        #define QS_MPC_(ctr_)       QS::u16_(ctr_)</span>
<a name="l01027"></a>01027 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_MPOOL_CTR_SIZE == 4)</span>
<a name="l01028"></a>01028 <span class="preprocessor"></span><span class="preprocessor">        #define QS_MPC_(ctr_)       QS::u32_(ctr_)</span>
<a name="l01029"></a>01029 <span class="preprocessor"></span><span class="preprocessor">    #endif</span>
<a name="l01030"></a>01030 <span class="preprocessor"></span>
<a name="l01031"></a>01031 
<a name="l01032"></a>01032 <span class="preprocessor">    #if (QF_TIMEEVT_CTR_SIZE == 1)</span>
<a name="l01033"></a>01033 <span class="preprocessor"></span>
<a name="l01037"></a>01037 <span class="preprocessor">        #define QS_TEC_(ctr_)       QS::u8_(ctr_)</span>
<a name="l01038"></a>01038 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_TIMEEVT_CTR_SIZE == 2)</span>
<a name="l01039"></a>01039 <span class="preprocessor"></span><span class="preprocessor">        #define QS_TEC_(ctr_)       QS::u16_(ctr_)</span>
<a name="l01040"></a>01040 <span class="preprocessor"></span><span class="preprocessor">    #elif (QF_TIMEEVT_CTR_SIZE == 4)</span>
<a name="l01041"></a>01041 <span class="preprocessor"></span><span class="preprocessor">        #define QS_TEC_(ctr_)       QS::u32_(ctr_)</span>
<a name="l01042"></a>01042 <span class="preprocessor"></span><span class="preprocessor">    #endif</span>
<a name="l01043"></a>01043 <span class="preprocessor"></span>
<a name="l01044"></a>01044 <span class="preprocessor">#else</span>
<a name="l01045"></a>01045 <span class="preprocessor"></span><span class="preprocessor">    #ifndef qs_dummy_h</span>
<a name="l01046"></a>01046 <span class="preprocessor"></span><span class="preprocessor">    #include "<a class="code" href="qs__dummy_8h.html" title="Dummy definitions of the QS macros that avoid code generation from the QS instrumentation...">qs_dummy.h</a>"</span>                   <span class="comment">// disable the QS software tracing</span>
<a name="l01047"></a>01047 <span class="preprocessor">    #endif</span>
<a name="l01048"></a>01048 <span class="preprocessor"></span><span class="preprocessor">#endif                                                                // Q_SPY</span>
<a name="l01049"></a>01049 <span class="preprocessor"></span>
<a name="l01050"></a>01050 <span class="preprocessor">#endif                                                                 // qf_h</span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Thu Apr 9 13:27:38 2009 for QP/C++ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.4 </small></address>
</body>
</html>
